<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>//MONODRAMA</title>
    <link rel="icon" type="image/x-icon" href="https://files.catbox.moe/9l76bt.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=VT323&family=Share+Tech+Mono&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1 class="glitch" data-text="MONODRAMA">MONODRAMA</h1>
            <div class="subtitle typing">[ MONOULLAH // SOLA ]</div>
        </header>

        <nav>
            <a href="#about" onclick="showSection('about'); return false;">PROFILE</a>
            <a href="#projects" onclick="showSection('projects'); return false;">PROJECTS</a>
            <a href="#contact" onclick="showSection('contact'); return false;">CONNECT</a>
            <a href="#guestbook" onclick="showSection('guestbook'); return false;">GUESTBOOK</a>
            <a href="#pgp" onclick="showSection('pgp'); return false;">PGP</a>
        </nav>

        <div class="main-grid">
            <aside class="sidebar left">
                <div class="terminal-box">
                    <div style="text-align: center; position: relative;">
                        <div style="position: relative; display: inline-block;">
                            <img id="discordAvatar" alt="Profile" class="profile-img">
                            <div class="status-indicator" id="discordStatus" title="Discord Status">
                                <div class="status-dot"></div>
                            </div>
                        </div>
                        <div class="profile-name">MONODRAMA</div>
                        <div class="profile-handle">@amonodrama</div>
                        <div class="discord-info">
                            <div style="display: flex; align-items: center; justify-content: center; gap: 0.5rem; margin-top: 0.5rem;">
                                <span style="font-size: 0.9rem;">Discord</span>
                                <span class="discord-badge" id="discordBadge">CHECKING...</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="terminal-box" style="margin-top: 1rem;">
                    <div class="terminal-header">CONNECTIONS</div>
                    <a href="https://github.com/amonodrama" class="link-item">
                        <span class="link-label">GITHUB</span>
                        <span class="link-value">@amonodrama</span>
                    </a>
                    <a href="https://keybase.io/amonodrama" class="link-item">
                        <span class="link-label">KEYBASE</span>
                        <span class="link-value">@amonodrama</span>
                    </a>
                    <a href="mailto:monodrama16@proton.me" class="link-item">
                        <span class="link-label">EMAIL</span>
                        <span class="link-value">monodrama16@proton.me</span></span>
                    </a>
                </div>

                <div class="terminal-box" style="margin-top: 1rem;">
                    <div class="terminal-header">SETUP</div>
                    <div class="link-item">
                        <span class="link-label">OS</span>
                        <span class="link-value">Custom Windows 11</span>
                    </div>
                    <div class="link-item">
                        <span class="link-label">EDITOR</span>
                        <span class="link-value">VS Code + Sublime Text</span>
                    </div>
                    <div class="link-item">
                        <span class="link-label">TERMINAL</span>
                        <span class="link-value">Cmder</span>
                    </div>
                </div>
            </aside>

            <main class="content">
                <div id="aboutSection" class="section-content active">
                    <div class="terminal-box">
                        <div class="terminal-header">MOTD</div>
                        <div style="text-align: center; padding: 2rem; border: 1px dashed var(--border-color); margin-bottom: 2rem; background: rgba(255, 0, 128, 0.02);">
                            <p style="font-family: 'VT323', monospace; font-size: 1.3rem; color: var(--tertiary-cyan);">
                                "I like pretty birds..."
                            </p>
                        </div>

                        <div class="terminal-header" id="about">ABOUT ME</div>
                        <div class="about-content">
                            <p>
                                Hello, I am <span class="highlight">monodrama</span>, just a hobbyist that  
                                loves coding and scriptwriting in general.You might know me as <span class="highlight">Sola</span> or <span class="highlight">basicSola</span> People usually refer to me as <span class="highlight">Mono</span> or <span class="highlight">Sola</span>.
                            </p>
                            <p>
                                My expertise is scripting and mostly backend stuff, <span class="highlight">Lua</span> is the language I'm most comfortable and confident with. However I use <span class="highlight">JavaScript</span> and <span class="highlight">Python</span> quite often too. I've also had some experience with <span class="highlight">HTML, CSS, React</span> and <span class="highlight">Anime.js</span>. 
                            </p>
                            <p>
                                I can't say I'm a master of anything other than Lua but I have experience and knowledge in all sorts of languages and things. Making music, audio stuff, books, writing, worldbuilding, a little bit of photoshop and video editing.
                            </p>
                        </div>
                    </div>

                    <div class="terminal-box" style="margin-top: 2rem;">
                        <div class="terminal-header">PGP</div>
                        <div style="background: rgba(0, 0, 0, 0.5); padding: 1rem; font-family: 'VT323', monospace; font-size: 1.2rem; border: 1px solid var(--border-color);">
                            <div style="color: var(--text-dim); margin-bottom: 1rem;">
                                <strong style="color: var(--primary-pink);">Identity:</strong><br>
                                <span style="color: var(--tertiary-cyan);">Mono Ullah</span>
                            </div>
                            <div style="color: var(--text-dim); margin-bottom: 1rem;">
                                <strong style="color: var(--primary-pink);">Email:</strong><br>
                                <a href="mailto:monodrama16@proton.me">monodrama16@proton.me</span></a><br>
                            </div>
                            <div style="color: var(--text-dim);">
                                <strong style="color: var(--primary-pink);">Fingerprint:</strong><br>
                                <span style="color: var(--tertiary-cyan); word-break: break-all;">
                                    5321 86DC 654B 5BE8 B605 6F87 9D5B 3678 9332 43B3
                                </span>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="projectsSection" class="section-content">
                    <div class="terminal-box">
                        <div class="terminal-header">REPOS</div>
                        <div id="reposContainer">
                            <div class="loading-spinner">
                                <div style="animation: flicker 2s infinite;">LOADING REPOSITORIES...</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="contactSection" class="section-content">
                    <div class="terminal-box">
                        <div class="terminal-header">CONNECT</div>
                        <div class="about-content">
                            <p>Feel free to reach out through any of these channels:</p>
                        </div>
                        <div style="margin-top: 1.5rem;">
                            <a href="https://github.com/amonodrama" class="link-item" target="_blank">
                                <span class="link-label">GITHUB</span>
                                <span class="link-value">@amonodrama</span>
                            </a>
                            <a href="https://www.reddit.com/user/amonodrama" class="link-item" target="_blank">
                                <span class="link-label">REDDIT</span>
                                <span class="link-value">u/amonodrama</span>
                            </a>
                            <a href="https://discord.com/users/315590911776260096" class="link-item" target="_blank">
                                <span class="link-label">DISCORD</span>
                                <span class="link-value">@amonodrama</span>
                            </a>
                            <a href="https://open.spotify.com/user/amonodrama" class="link-item" target="_blank">
                                <span class="link-label">SPOTIFY</span>
                                <span class="link-value">@amonodrama</span>
                            </a>
                            <a href="mailto:monodrama16@proton.me" class="link-item" target="_blank">
                                <span class="link-label">EMAIL</span>
                                <span class="link-value">monodrama16@proton.me</span></span>
                            </a>
                        </div>
                    </div>
                </div>

                <div id="guestbookSection" class="section-content">
                    <div class="terminal-box">
                        <div class="terminal-header">GUESTBOOK // WEBRING</div>
                        <div class="about-content" style="margin-bottom: 1rem;">
                            <p style="font-size: 0.9rem;">Leave your message. You can add your website too. Hopefully this will be a big webring over time.</p>
                        </div>

                        <div style="background: rgba(0, 0, 0, 0.3); padding: 1rem; border: 1px solid var(--border-color); margin-bottom: 1.5rem;">
                            <form id="guestbookForm" onsubmit="submitGuestbookEntry(event)">
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem; margin-bottom: 0.75rem;">
                                    <div>
                                        <label style="display: block; color: var(--primary-pink); margin-bottom: 0.25rem; font-family: 'VT323', monospace; font-size: 0.95rem;">NAME *</label>
                                        <input type="text" id="guestName" required style="width: 100%; padding: 0.4rem; background: rgba(0, 0, 0, 0.5); border: 1px solid var(--border-color); color: var(--tertiary-cyan); font-family: 'Share Tech Mono', monospace; font-size: 0.85rem;">
                                    </div>
                                    <div>
                                        <label style="display: block; color: var(--primary-pink); margin-bottom: 0.25rem; font-family: 'VT323', monospace; font-size: 0.95rem;">WEBSITE</label>
                                        <input type="url" id="guestWebsite" placeholder="https://..." style="width: 100%; padding: 0.4rem; background: rgba(0, 0, 0, 0.5); border: 1px solid var(--border-color); color: var(--tertiary-cyan); font-family: 'Share Tech Mono', monospace; font-size: 0.85rem;">
                                    </div>
                                </div>

                                <div style="margin-bottom: 0.75rem;">
                                    <label style="display: block; color: var(--primary-pink); margin-bottom: 0.25rem; font-family: 'VT323', monospace; font-size: 0.95rem;">AVATAR_URL</label>
                                    <input type="url" id="guestAvatar" placeholder="https://..." style="width: 100%; padding: 0.4rem; background: rgba(0, 0, 0, 0.5); border: 1px solid var(--border-color); color: var(--tertiary-cyan); font-family: 'Share Tech Mono', monospace; font-size: 0.85rem;">
                                </div>

                                <div style="margin-bottom: 0.75rem;">
                                    <label style="display: block; color: var(--primary-pink); margin-bottom: 0.25rem; font-family: 'VT323', monospace; font-size: 0.95rem;">MESSAGE *</label>
                                    <textarea id="guestMessage" required rows="3" maxlength="500" style="width: 100%; padding: 0.4rem; background: rgba(0, 0, 0, 0.5); border: 1px solid var(--border-color); color: var(--tertiary-cyan); font-family: 'Share Tech Mono', monospace; resize: vertical; font-size: 0.85rem;"></textarea>
                                    <small style="color: var(--text-dim); font-size: 0.75rem;"><span id="charCount">0</span>/500</small>
                                </div>

                                <button type="submit" id="submitBtn" style="width: 100%; padding: 0.5rem; background: rgba(255, 0, 128, 0.1); color: var(--primary-pink); border: none; font-family: 'VT323', monospace; font-size: 1rem; cursor: pointer; transition: all 0.3s; border: 1px solid var(--primary-pink);" onmouseover="this.style.background='transparent'; this.style.color='var(--primary-pink)';" onmouseout="this.style.background='rgba(255, 0, 128, 0.2)'; this.style.color='var(--bg-dark)';">
                                    SUBMIT >>
                                </button>
                            </form>
                        </div>

                        <div class="terminal-header" style="margin-top: 1.5rem;">ENTRIES</div>
                        <div id="guestbookEntries" style="margin-top: 1rem;">
                            <div style="text-align: center; padding: 2rem; color: var(--text-dim);">
                                <div class="loading-spinner">
                                    <div style="animation: flicker 2s infinite;">LOADING ENTRIES...</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="pgpSection" class="section-content">
                    <div class="terminal-box">
                        <div class="terminal-header">PGP KEY</div>
                        <div style="background: rgba(0, 0, 0, 0.5); padding: 1rem; font-family: 'VT323', monospace; font-size: 1.2rem; border: 1px solid var(--border-color);">
                            <div style="color: var(--text-dim); margin-bottom: 1rem;">
                                <strong style="color: var(--primary-pink);">Identity:</strong><br>
                                <span style="color: var(--tertiary-cyan);">Mono Ullah</span>
                            </div>
                            <div style="color: var(--text-dim); margin-bottom: 1rem;">
                                <strong style="color: var(--primary-pink);">Email:</strong><br>
                                <a href="mailto:monodrama16@proton.me">monodrama16@proton.me</a><br>
                            </div>
                            <div style="color: var(--text-dim); margin-bottom: 1rem;">
                                <strong style="color: var(--primary-pink);">Keyservers:</strong><br>
                                <a href="https://keyserver.ubuntu.com/pks/lookup?search=5321+86DC+654B+5BE8+B605+6F87+9D5B+3678+9332+43B3&fingerprint=on&op=index" target="_blank" style="color: var(--tertiary-cyan); text-decoration: none; transition: color 0.3s;" onmouseover="this.style.color='var(--primary-pink)'" onmouseout="this.style.color='var(--tertiary-cyan)'">Ubuntu Keyserver</a><br>
                                <a href="https://keys.openpgp.org/vks/v1/by-fingerprint/532186DC654B5BE8B6056F879D5B3678933243B3" target="_blank" style="color: var(--tertiary-cyan); text-decoration: none; transition: color 0.3s;" onmouseover="this.style.color='var(--primary-pink)'" onmouseout="this.style.color='var(--tertiary-cyan)'">OpenPGP Keyserver</a><br>
                            </div>
                            <div style="color: var(--text-dim);">
                                <strong style="color: var(--primary-pink);">Fingerprint:</strong><br>
                                <span style="color: var(--tertiary-cyan); word-break: break-all;">
                                    5321 86DC 654B 5BE8 B605 6F87 9D5B 3678 9332 43B3
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </main>

            <aside class="sidebar right">
                <div class="terminal-box">
                    <div class="terminal-header">STUFF</div>
                    <div class="status-item">
                        <span class="status-label">Working On</span>
                        <span class="status-value">pixedtool</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">Learning</span>
                        <span class="status-value">Image/Text Models</span>
                    </div>
                    <div class="status-item" style="border-bottom: none;">
                        <span class="status-label">VPN</span>
                        <span class="status-value" style="color: var(--primary-pink);">◉ WIRESOCK</span>
                    </div>
                </div>

                <div class="terminal-box" style="margin-top: 1rem;">
                    <div class="terminal-header">LISTENING TO</div>
                    <div class="music-player">
                        <div class="album-art" id="albumArt">
                            <span style="font-size: 2rem; opacity: 0.3;">♪</span>
                        </div>
                        <div class="track-info" style="padding: 0.5rem;">
                            <div class="track-title" id="trackTitle" style="font-size: 0.9rem;">Not Playing</div>
                            <div class="track-artist" id="trackArtist" style="font-size: 0.75rem;">Waiting for Spotify...</div>
                            <div id="trackAlbum" style="margin-top: 0.3rem; font-size: 0.7rem; color: var(--text-dim);">
                                No active session
                            </div>
                        </div>
                        <div class="player-controls" style="padding: 0.3rem 0;">
                            <button class="control-btn" id="spotifyBtn" onclick="openSpotify()" title="Open in Spotify" style="font-size: 0.8rem; padding: 0.3rem 0.6rem;">
                                <span style="font-size: 1rem;">♫</span> OPEN
                            </button>
                        </div>
                        <div class="progress-bar" style="height: 3px;">
                            <div class="progress-fill" id="progressBar" style="width: 0%;"></div>
                        </div>
                        <div class="time-display" style="font-size: 0.7rem; padding: 0.3rem 0;">
                            <span id="currentTime">0:00</span>
                            <span id="totalTime">0:00</span>
                        </div>
                    </div>
                </div>
            </aside>
        </div>

        <footer>
            <div class="footer-text">
                <p>[ MONODRAMA // 2026 // basicSola ]</p>
                <p style="margin-top: 0.5rem; font-size: 1.1rem;">
                </p>
            </div>
        </footer>
    </div>

    <script>
        function initAnimeAnimations() {

            anime({
                targets: '.terminal-box',
                opacity: [0, 1],
                translateY: [30, 0],
                delay: anime.stagger(100),
                duration: 800,
                easing: 'easeOutQuad'
            });

            anime({
                targets: '.glitch',
                scale: [0.95, 1],
                opacity: [0, 1],
                duration: 1000,
                easing: 'easeOutElastic(1, .6)'
            });

            anime({
                targets: 'nav a',
                opacity: [0, 1],
                translateX: [-20, 0],
                delay: anime.stagger(80, {start: 500}),
                duration: 600,
                easing: 'easeOutQuad'
            });

            anime({
                targets: '.profile-img',
                scale: [0, 1],
                rotate: [180, 0],
                opacity: [0, 1],
                duration: 1200,
                delay: 300,
                easing: 'easeOutElastic(1, .8)'
            });

            anime({
                targets: '.link-item',
                opacity: [0, 1],
                translateX: [-15, 0],
                delay: anime.stagger(60, {start: 800}),
                duration: 500,
                easing: 'easeOutQuad'
            });

            anime({
                targets: '.status-dot',
                scale: [1, 1.2, 1],
                duration: 2000,
                loop: true,
                easing: 'easeInOutSine'
            });

            document.querySelectorAll('nav a').forEach(link => {
                link.addEventListener('mouseenter', function() {
                    anime({
                        targets: this,
                        scale: 1.05,
                        duration: 300,
                        easing: 'easeOutQuad'
                    });
                });
                
                link.addEventListener('mouseleave', function() {
                    anime({
                        targets: this,
                        scale: 1,
                        duration: 300,
                        easing: 'easeOutQuad'
                    });
                });
            });

            document.querySelectorAll('.link-item').forEach(item => {
                item.addEventListener('mouseenter', function() {
                    anime({
                        targets: this,
                        translateX: 5,
                        duration: 300,
                        easing: 'easeOutQuad'
                    });
                });
                
                item.addEventListener('mouseleave', function() {
                    anime({
                        targets: this,
                        translateX: 0,
                        duration: 300,
                        easing: 'easeOutQuad'
                    });
                });
            });
        }

        window.addEventListener('DOMContentLoaded', function() {
            initAnimeAnimations();
        });

        const DISCORD_USER_ID = '315590911776260096';
        
        let spotifyData = null;
        
        function formatTime(ms) {
            const minutes = Math.floor(ms / 60000);
            const seconds = Math.floor((ms % 60000) / 1000);
            return `${minutes}:${seconds.toString().padStart(2, '0')}`;
        }
        
        function updateDiscordAvatar(data) {
            const avatarImg = document.getElementById('discordAvatar');
            
            if (data && data.discord_user) {
                const user = data.discord_user;
                let avatarUrl;
                
                if (user.avatar) {
                    const extension = user.avatar.startsWith('a_') ? 'gif' : 'png';
                    avatarUrl = `https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.${extension}?size=256`;
                } else {
                    const defaultAvatarNum = parseInt(user.discriminator) % 5;
                    avatarUrl = `https://cdn.discordapp.com/embed/avatars/${defaultAvatarNum}.png`;
                }
                
                avatarImg.src = avatarUrl;
            }
        }
        
        function updateSpotifyDisplay(spotify) {
            const albumArt = document.getElementById('albumArt');
            const trackTitle = document.getElementById('trackTitle');
            const trackArtist = document.getElementById('trackArtist');
            const trackAlbum = document.getElementById('trackAlbum');
            const currentTime = document.getElementById('currentTime');
            const totalTime = document.getElementById('totalTime');
            const progressBar = document.getElementById('progressBar');
            
            if (spotify) {
                if (spotify.album_art_url) {
                    albumArt.innerHTML = `<img src="${spotify.album_art_url}" alt="Album Art">`;
                    albumArt.classList.add('playing');
                } else {
                    albumArt.innerHTML = '<span style="font-size: 3rem;">♪</span>';
                    albumArt.classList.remove('playing');
                }
                
                trackTitle.textContent = spotify.song || 'Unknown Track';
                trackArtist.textContent = spotify.artist || 'Unknown Artist';
                trackAlbum.textContent = `Album: ${spotify.album || 'Unknown Album'}`;
                
                if (spotify.timestamps && spotify.timestamps.start && spotify.timestamps.end) {
                    const elapsed = Date.now() - spotify.timestamps.start;
                    const duration = spotify.timestamps.end - spotify.timestamps.start;
                    const progress = (elapsed / duration) * 100;
                    
                    progressBar.style.width = Math.min(Math.max(progress, 0), 100) + '%';
                    currentTime.textContent = formatTime(Math.max(elapsed, 0));
                    totalTime.textContent = formatTime(duration);
                } else {
                    progressBar.style.width = '0%';
                    currentTime.textContent = '0:00';
                    totalTime.textContent = '0:00';
                }
                
                spotifyData = spotify;
                
                anime({
                    targets: '.music-player',
                    scale: [0.98, 1],
                    duration: 500,
                    easing: 'easeOutQuad'
                });
            } else {
                albumArt.innerHTML = '<span style="font-size: 3rem; opacity: 0.3;">♪</span>';
                albumArt.classList.remove('playing');
                trackTitle.textContent = 'Not Playing';
                trackArtist.textContent = 'No active Spotify session';
                trackAlbum.textContent = '';
                progressBar.style.width = '0%';
                currentTime.textContent = '0:00';
                totalTime.textContent = '0:00';
                spotifyData = null;
            }
        }
        
        function openSpotify() {
            if (spotifyData && spotifyData.track_id) {
                window.open(`https://open.spotify.com/track/${spotifyData.track_id}`, '_blank');
            } else {
                alert('No track currently playing on Spotify');
            }
        }
        
        async function checkDiscordStatus() {
            const statusIndicator = document.getElementById('discordStatus');
            const statusBadge = document.getElementById('discordBadge');
            
            try {
                const response = await fetch(`https://api.lanyard.rest/v1/users/${DISCORD_USER_ID}`);
                const data = await response.json();
                
                if (data.success && data.data) {
                    const status = data.data.discord_status;
                    const spotify = data.data.spotify;
                    
                    updateDiscordAvatar(data.data);
                    
                    statusIndicator.className = `status-indicator ${status}`;
                    statusBadge.className = `discord-badge ${status}`;
                    
                    switch(status) {
                        case 'online':
                            statusBadge.textContent = 'ONLINE';
                            break;
                        case 'idle':
                            statusBadge.textContent = 'IDLE';
                            break;
                        case 'dnd':
                            statusBadge.textContent = 'DO NOT DISTURB';
                            break;
                        default:
                            statusBadge.textContent = 'OFFLINE';
                            statusIndicator.className = 'status-indicator offline';
                            statusBadge.className = 'discord-badge offline';
                    }
                    
                    anime({
                        targets: [statusIndicator, statusBadge],
                        scale: [1.1, 1],
                        duration: 400,
                        easing: 'easeOutElastic(1, .6)'
                    });
                    
                    updateSpotifyDisplay(spotify);
                } else {
                    throw new Error('Invalid API response');
                }
            } catch (error) {
                console.error('Error fetching Discord status:', error);
                statusBadge.textContent = 'UNAVAILABLE';
                statusBadge.className = 'discord-badge offline';
                statusIndicator.className = 'status-indicator offline';
                updateSpotifyDisplay(null);
            }
        }
        
        if (DISCORD_USER_ID !== 'YOUR_DISCORD_USER_ID') {
            checkDiscordStatus();
            setInterval(checkDiscordStatus, 5000);
        } else {
            document.getElementById('discordBadge').textContent = 'CONFIG NEEDED';
            document.getElementById('discordBadge').style.color = '#ff0040';
            document.getElementById('trackArtist').textContent = 'Configure Discord User ID first';
        }

        function showSection(sectionName) {
            const activeSections = document.querySelectorAll('.section-content.active');
            activeSections.forEach(section => {
                anime({
                    targets: section,
                    opacity: 0,
                    translateY: -20,
                    duration: 300,
                    easing: 'easeInQuad',
                    complete: function() {
                        section.classList.remove('active');
                    }
                });
            });
            
            setTimeout(() => {
                const targetSection = document.getElementById(sectionName + 'Section');
                if (targetSection) {
                    targetSection.classList.add('active');
                    
                    anime({
                        targets: targetSection,
                        opacity: [0, 1],
                        translateY: [20, 0],
                        duration: 500,
                        easing: 'easeOutQuad'
                    });

                    const boxes = targetSection.querySelectorAll('.terminal-box');
                    anime({
                        targets: boxes,
                        opacity: [0, 1],
                        translateY: [30, 0],
                        delay: anime.stagger(100, {start: 200}),
                        duration: 600,
                        easing: 'easeOutQuad'
                    });
                    
                    if (sectionName === 'projects' && !window.reposLoaded) {
                        loadGitHubRepos();
                    }
                }
            }, 350);
        }

        let reposLoaded = false;
        
        async function loadGitHubRepos() {
            const container = document.getElementById('reposContainer');
            
            try {
                const response = await fetch('https://api.github.com/users/amonodrama/repos?sort=updated&per_page=100');
                const repos = await response.json();
                
                if (!Array.isArray(repos)) {
                    throw new Error('Invalid response from GitHub API');
                }
                
                const ownRepos = repos
                    .filter(repo => !repo.fork)
                    .sort((a, b) => b.stargazers_count - a.stargazers_count);
                
                if (ownRepos.length === 0) {
                    container.innerHTML = '<div style="text-align: center; padding: 2rem; color: var(--text-dim);">No repositories found</div>';
                    return;
                }
                
                container.innerHTML = ownRepos.map(repo => `
                    <div class="repo-card">
                        <div class="repo-header">
                            <div>
                                ${repo.language ? `<span class="language-badge">${repo.language}</span>` : ''}
                                <a href="${repo.html_url}" target="_blank" class="repo-name">${repo.name}</a>
                            </div>
                        </div>
                        <div class="repo-description">
                            ${repo.description || '<em style="color: var(--text-dim);">No description provided</em>'}
                        </div>
                        <div class="repo-stats">
                            <div class="repo-stat">
                                <svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M8 .25a.75.75 0 01.673.418l1.882 3.815 4.21.612a.75.75 0 01.416 1.279l-3.046 2.97.719 4.192a.75.75 0 01-1.088.791L8 12.347l-3.766 1.98a.75.75 0 01-1.088-.79l.72-4.194L.818 6.374a.75.75 0 01.416-1.28l4.21-.611L7.327.668A.75.75 0 018 .25z"/>
                                </svg>
                                <span>${repo.stargazers_count}</span>
                            </div>
                            <div class="repo-stat">
                                <svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M5 5.372v.878c0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75v-.878a2.25 2.25 0 111.5 0v.878a2.25 2.25 0 01-2.25 2.25h-1.5v2.128a2.251 2.251 0 11-1.5 0V8.5h-1.5A2.25 2.25 0 013 6.25v-.878a2.25 2.25 0 111.5 0zM5 3.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm6.75.75a.75.75 0 100-1.5.75.75 0 000 1.5zm-3 8.75a.75.75 0 100-1.5.75.75 0 000 1.5z"/>
                                </svg>
                                <span>${repo.forks_count}</span>
                            </div>
                            ${repo.license ? `
                                <div class="repo-stat">
                                    <svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M8.75.75V2h.985c.304 0 .603.08.867.231l1.29.736c.038.022.08.033.124.033h2.234a.75.75 0 010 1.5h-.427l2.111 4.692a.75.75 0 01-.154.838l-.53-.53.529.531-.001.002-.002.002-.006.006-.016.015-.045.04a3.514 3.514 0 01-.686.45A4.492 4.492 0 0113 10c-.707 0-1.356-.244-1.87-.673a.75.75 0 01-.104-.105l-.002.003-1.036-1.036a4.492 4.492 0 01-3.976 0l-1.036 1.036-.002-.003a.75.75 0 01-.104.105 4.492 4.492 0 01-5.37-.327 3.514 3.514 0 01-.686-.45l-.045-.04-.016-.015-.006-.006-.002-.002v-.002l.53.531-.531-.531a.75.75 0 01-.154-.838L2.5 4.25h-.427a.75.75 0 010-1.5h2.234c.044 0 .086-.011.124-.033l1.29-.736A1.75 1.75 0 016.588 2h.985V.75a.75.75 0 011.5 0z"/>
                                    </svg>
                                    <span>${repo.license.spdx_id}</span>
                                </div>
                            ` : ''}
                            <div class="repo-stat">
                                <svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M8 0a8 8 0 110 16A8 8 0 018 0zM1.5 8a6.5 6.5 0 1113 0 6.5 6.5 0 01-13 0zm7-3.25v2.992l2.028.812a.75.75 0 01-.557 1.392l-2.5-1A.75.75 0 017 8.25v-3.5a.75.75 0 011.5 0z"/>
                                </svg>
                                <span>Updated ${formatDate(repo.updated_at)}</span>
                            </div>
                        </div>
                    </div>
                `).join('');
                
                anime({
                    targets: '.repo-card',
                    opacity: [0, 1],
                    translateY: [30, 0],
                    delay: anime.stagger(80),
                    duration: 600,
                    easing: 'easeOutQuad'
                });
                
                window.reposLoaded = true;
            } catch (error) {
                console.error('Error fetching GitHub repos:', error);
                container.innerHTML = `
                    <div style="text-align: center; padding: 2rem; color: var(--accent-red);">
                        <div style="font-family: 'VT323', monospace; font-size: 1.2rem; margin-bottom: 1rem;">
                            ERROR: Failed to load repositories
                        </div>
                        <div style="color: var(--text-dim); font-size: 0.9rem;">
                            ${error.message}
                        </div>
                    </div>
                `;
            }
        }
        
        function formatDate(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            const diffTime = Math.abs(now - date);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            if (diffDays < 1) return 'today';
            if (diffDays === 1) return 'yesterday';
            if (diffDays < 7) return `${diffDays} days ago`;
            if (diffDays < 30) return `${Math.floor(diffDays / 7)} weeks ago`;
            if (diffDays < 365) return `${Math.floor(diffDays / 30)} months ago`;
            return `${Math.floor(diffDays / 365)} years ago`;
        }

        const DISCORD_WEBHOOK_URL = 'https://discord.com/api/webhooks/1469232991111745752/EMB7cUy91FJA8AMOLv7DpJ4qSLPxcDIHO2u42QsSPvfELpihrGDJZQ-cMVHQClSa0bEy'; // Replace with your webhook URL
        
        const messageTextarea = document.getElementById('guestMessage');
        const charCountSpan = document.getElementById('charCount');
        
        if (messageTextarea && charCountSpan) {
            messageTextarea.addEventListener('input', function() {
                charCountSpan.textContent = this.value.length;
            });
        }

        async function submitGuestbookEntry(event) {
            event.preventDefault();
            
            const name = document.getElementById('guestName').value.trim();
            const website = document.getElementById('guestWebsite').value.trim();
            const avatar = document.getElementById('guestAvatar').value.trim();
            const message = document.getElementById('guestMessage').value.trim();
            const submitBtn = document.getElementById('submitBtn');

            if (!name || !message) {
                showNotification('Please fill in all required fields.', 'error');
                return;
            }
            submitBtn.disabled = true;
            submitBtn.textContent = 'SENDING...';

            try {
                const timestamp = Date.now();
                
                function escapeForJS(str) {
                    return str
                        .replace(/\\/g, '\\\\')
                        .replace(/"/g, '\\"')
                        .replace(/\n/g, '\\n')
                        .replace(/\r/g, '\\r');
                }
                
                const entryCode = `{
    name: "${escapeForJS(name)}",
    website: "${escapeForJS(website)}",
    avatar: "${escapeForJS(avatar)}",
    message: "${escapeForJS(message)}",
    timestamp: ${timestamp}
},`;
                
                const response = await fetch(DISCORD_WEBHOOK_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        username: "Guestbook Bot",
                        content: "```javascript\n" + entryCode + "\n```"
                    })
                });

                if (response.ok) {
                    document.getElementById('guestbookForm').reset();
                    charCountSpan.textContent = '0';
                    
                    showNotification('✓ Entry submitted! It will be reviewed and added manually.', 'success');
                } else {
                    throw new Error('Failed to send to Discord');
                }

            } catch (error) {
                console.error('Error submitting entry:', error);
                showNotification('✗ Failed to submit entry. Please try again.', 'error');
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = 'SUBMIT >>';
            }
        }

        function showNotification(message, type) {
            const container = document.getElementById('guestbookEntries');
            const notification = document.createElement('div');
            
            const bgColor = type === 'success' ? 'rgba(0, 255, 136, 0.2)' : 'rgba(255, 0, 64, 0.2)';
            const borderColor = type === 'success' ? 'var(--secondary-green)' : 'var(--accent-red)';
            const textColor = type === 'success' ? 'var(--secondary-green)' : 'var(--accent-red)';
            
            notification.style.cssText = `
                background: ${bgColor}; 
                border: 1px solid ${borderColor}; 
                padding: 1rem; 
                margin-bottom: 1rem; 
                text-align: center; 
                color: ${textColor}; 
                font-family: VT323, monospace; 
                font-size: 1.1rem;
                opacity: 0;
            `;
            notification.textContent = message;
            
            const formSection = document.querySelector('#guestbookForm').parentElement;
            formSection.parentElement.insertBefore(notification, container);
            
            anime({
                targets: notification,
                opacity: [0, 1],
                translateY: [-20, 0],
                duration: 400,
                easing: 'easeOutQuad'
            });
            
            setTimeout(() => {
                anime({
                    targets: notification,
                    opacity: 0,
                    translateY: -20,
                    duration: 300,
                    easing: 'easeInQuad',
                    complete: () => notification.remove()
                });
            }, 4700);
        }

        function loadGuestbookEntries() {
            const container = document.getElementById('guestbookEntries');
            if (!container) return;

            const entries = [
                {
                    name: "Monodrama",
                    website: "",
                    avatar: "https://cdn.discordapp.com/avatars/315590911776260096/             a_b6c7162398668920d7e33bde40246642.gif?size=256",
                    message: "Welcome to my guestbook, feel free to leave a message here or your cool               website for people to explore.",
                    timestamp: 1770363607178
                }
            ];

            if (entries.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 2rem; color: var(--text-dim); border: 1px dashed var(--border-color);">
                        <p style="font-family: 'VT323', monospace; font-size: 1.2rem;">No entries yet. Be the first to sign!</p>
                    </div>
                `;
                return;
            }

            entries.sort((a, b) => b.timestamp - a.timestamp);

            container.innerHTML = entries.map(entry => `
                <div class="guestbook-entry" style="background: rgba(0, 0, 0, 0.3); border: 1px solid var(--border-color); padding: 1rem; margin-bottom: 1rem; position: relative; opacity: 0;">
                    <div style="display: flex; gap: 1rem; align-items: start;">
                        <div style="flex-shrink: 0;">
                            <img src="${entry.avatar || 'data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22100%22 height=%22100%22%3E%3Crect fill=%22%23ff0080%22 width=%22100%22 height=%22100%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 font-size=%2250%22 text-anchor=%22middle%22 dy=%22.3em%22 fill=%22%23000%22%3E${entry.name.charAt(0).toUpperCase()}%3C/text%3E%3C/svg%3E'}" 
                                 alt="${entry.name}" 
                                 style="width: 60px; height: 60px; border-radius: 4px; border: 2px solid var(--primary-pink); object-fit: cover;"
                                 onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22100%22 height=%22100%22%3E%3Crect fill=%22%23ff0080%22 width=%22100%22 height=%22100%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 font-size=%2250%22 text-anchor=%22middle%22 dy=%22.3em%22 fill=%22%23000%22%3E${entry.name.charAt(0).toUpperCase()}%3C/text%3E%3C/svg%3E'">
                        </div>
                        <div style="flex-grow: 1;">
                            <div style="margin-bottom: 0.5rem;">
                                <span style="color: var(--primary-pink); font-family: 'VT323', monospace; font-size: 1.2rem;">${escapeHtml(entry.name)}</span>
                                ${entry.website ? `
                                    <a href="${escapeHtml(entry.website)}" target="_blank" rel="noopener noreferrer" style="color: var(--tertiary-cyan); text-decoration: none; margin-left: 0.5rem; font-size: 0.9rem;" title="Visit website">
                                        [WEBSITE] →
                                    </a>
                                ` : ''}
                                <span style="color: var(--text-dim); font-size: 0.85rem; margin-left: 0.5rem;">
                                    ${formatGuestbookDate(entry.timestamp)}
                                </span>
                            </div>
                            <div style="color: var(--text-primary); font-family: 'Share Tech Mono', monospace; line-height: 1.6; word-wrap: break-word;">
                                ${escapeHtml(entry.message)}
                            </div>
                        </div>
                    </div>
                `).join('');
            
            anime({
                targets: '.guestbook-entry',
                opacity: [0, 1],
                translateX: [-20, 0],
                delay: anime.stagger(80),
                duration: 500,
                easing: 'easeOutQuad'
            });
        }

        function escapeHtml(text) {
            const map = {
                '&': '&amp;',
                '<': '&lt;',
                '>': '&gt;',
                '"': '&quot;',
                "'": '&#039;'
            };
            return text.replace(/[&<>"']/g, m => map[m]);
        }

        function formatGuestbookDate(timestamp) {
            const date = new Date(timestamp);
            const now = new Date();
            const diffTime = Math.abs(now - date);
            const diffMinutes = Math.floor(diffTime / (1000 * 60));
            const diffHours = Math.floor(diffTime / (1000 * 60 * 60));
            const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));

            if (diffMinutes < 1) return 'just now';
            if (diffMinutes < 60) return `${diffMinutes}m ago`;
            if (diffHours < 24) return `${diffHours}h ago`;
            if (diffDays < 7) return `${diffDays}d ago`;
            
            return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
        }

        const originalShowSection = showSection;
        showSection = function(sectionName) {
            originalShowSection(sectionName);
            if (sectionName === 'guestbook') {
                loadGuestbookEntries();
            }
        };

        if (window.location.hash === '#guestbook') {
            loadGuestbookEntries();
        }
    </script>
</body>
</html>
